"use strict";(self.webpackChunkklovit=self.webpackChunkklovit||[]).push([[699],{2427:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var o=t(5893),i=t(1151);const s={sidebar_position:3},r="Configuration",a={id:"KlovitClient/configuration",title:"configuration",description:"KlovitClient | Configuration",source:"@site/docs/KlovitClient/configuration.md",sourceDirName:"KlovitClient",slug:"/KlovitClient/configuration",permalink:"/docs/KlovitClient/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/Klovit/docs/blob/main/docs/KlovitClient/configuration.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"installation",permalink:"/docs/KlovitClient/installation"},next:{title:"congratulations",permalink:"/docs/KlovitClient/congratulations"}},l={},c=[{value:"Configuring your Settings",id:"configuring-your-settings",level:2},{value:"Setting Up Nginx",id:"setting-up-nginx",level:2},{value:"Starting KlovitClient",id:"starting-klovitclient",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components},{Head:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t,{children:[(0,o.jsx)("title",{children:"KlovitClient | Configuration"}),(0,o.jsx)("meta",{charset:"utf-8"}),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),(0,o.jsx)("meta",{name:"description",content:"The Next-Gen Developers"}),(0,o.jsx)("meta",{name:"keywords",content:"KlovitClient, Klovit,"}),(0,o.jsx)("meta",{name:"author",content:"Klovit"}),(0,o.jsx)("meta",{name:"copyright",content:"Klovit"}),(0,o.jsx)("meta",{property:"og:type",content:"website"}),(0,o.jsx)("meta",{property:"og:title",content:"Klovit"}),(0,o.jsx)("meta",{property:"og:description",content:"The Next-Gen Developers."}),(0,o.jsx)("meta",{property:"og:image",content:"https://docs.klovit.tech/img/Klovit%20Logo.png"}),(0,o.jsx)("meta",{name:"twitter:card",content:"https://docs.klovit.tech/img/Klovit%20Logo.png"}),(0,o.jsx)("meta",{name:"twitter:title",content:"Klovit"}),(0,o.jsx)("meta",{name:"twitter:description",content:"The Next-Gen Developers."}),(0,o.jsx)("meta",{name:"twitter:image",content:"https://docs.klovit.tech/img/Klovit%20Logo.png"}),(0,o.jsx)("meta",{name:"twitter:image:src",content:"https://docs.klovit.tech/img/Klovit%20Logo.png"})]}),"\n",(0,o.jsx)(n.h1,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["This page goes over the ",(0,o.jsx)(n.code,{children:"config.yml"})," configuration and setting up the Nginx webserver for KlovitClient."]}),"\n",(0,o.jsx)(n.h2,{id:"configuring-your-settings",children:"Configuring your Settings"}),"\n",(0,o.jsxs)(n.p,{children:["Because the ",(0,o.jsx)(n.code,{children:"config.yml"})," file is so large, this page will break down and explain each individual section."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yml",children:"---\nversion: '0.5' # Version of the KlovitClient instance\nname: KlovitClient # Your Host's name\nresource_type: 'GB' # This can be either GB or MB, NOTE:- If you have chosen GB then 100% cpu will be 1 thread, if you have chosen MB then 1 thread will be 100% cpu\nwebsite: \n  secret: \"Website secret\" # Randomize this as this will be the secret of the website for the session and middleware cookie\n  url:  # URL of the dashboard\n  port: '8081' # The port on which this KlovitClient instance will run\n  description: The most reliable hosting # The description for your Hosting\n  icon: https://docs.klovit.tech/img/Klovit%20Logo.png # Logo of your hosting\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The start of the settings file; The ",(0,o.jsx)(n.code,{children:"name"})," is the name of the Organisation/Host running KlovitClient. ",(0,o.jsx)(n.code,{children:"resource_type"})," is the unit of resource you want to use, valid options are - GB / MB. The ",(0,o.jsx)(n.code,{children:"secret"})," is a randomly genererated password that you must keep secret as it it is what the dashboards sessions are encrypted with. The ",(0,o.jsx)(n.code,{children:"url"})," is the URL of the dashboard, this is important for the authentication to work. The ",(0,o.jsx)(n.code,{children:"port"})," is the port on which you want the KlovitCLient instance to be running on. The ",(0,o.jsx)(n.code,{children:"description"})," is the Description of your dashboard. The ",(0,o.jsx)(n.code,{children:"icon"})," is the logo of the Organisation/Host."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yml",children:"pterodactyl:\n  url: 'https://panel.example.com' # Your Pterodactyl Panel URL with \"http://\" or \"https://\"\n  api: '' # Your Pterodactyl Panel Admin API Key\npackages:\n  default: default\n  list:\n    default:\n      ram: 100 # Formatted according to \"resource_type\"\n      disk: 200\n      cpu: 200 # NOTE - If you have selected GB as resource_type, then 100% cpu is 1. If you have selected MB as resource_type then 100% cpu is 100\n      servers: 100\nauth:\n  supabase: # REQUIRED\n    supabase_url: '' # URL of your SupaBase Project\n    supabase_anon_key: '' # Anon/API Key of your SupaBase Project\n    oauth2:\n      google:\n        enabled: false\n      github:\n        enabled: false\n      discord:\n        enabled: true\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The start of second part, ",(0,o.jsx)(n.code,{children:"url"})," is the URL of the Pterodactyl Instance. The ",(0,o.jsx)(n.code,{children:"api"})," is the Admin API Key of your Pterodactyl Instance. In the packages section, the ",(0,o.jsx)(n.code,{children:"list"})," is the list of the packages. The ",(0,o.jsx)(n.code,{children:"default"})," is the default package for every end-user.\nIn the packages list you use the format given for the default packageor else you might run into errors. Here is a conversion of resources, ",(0,o.jsx)(n.code,{children:"1"})," GB is ",(0,o.jsx)(n.code,{children:"1024"})," MB and ",(0,o.jsx)(n.code,{children:"1"})," Thread is ",(0,o.jsx)(n.code,{children:"100"}),"% CPU. The unit will be based on the value of the ",(0,o.jsx)(n.code,{children:"resource_type"})," option.\nIn the auth section, you have to enter the URL of your Supabase project in the ",(0,o.jsx)(n.code,{children:"supabase_url"})," field. You have to enter the anon key of your SupaBase project in the ",(0,o.jsx)(n.code,{children:"supabase_anon_key"})," field. In the next part, you decide which OAuth provider you want to enable. After enabling a OAuth provider, you have to configure it in SupaBase Project's settings"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yml",children:"database:\n  type: 'sqlite' # Available types are 'sqlite' and 'mysql'\n  sqlite: # ONLY CONFIGURE IS YOU HAVE DATABASE TYPE AS 'sqlite'\n    sqlite_db_name: 'database.sqlite' # The database will be stored in './database/' directory\n  mysql: # ONLY CONFIGURE IS YOU HAVE DATABASE TYPE AS 'mysql'\n    mysql_db_name: 'klovitclient' # Your MYSQL DB name\n    mysql_db_host: 'localhost' # Your MYSQL DB HOST\n    mysql_db_port: '3306' # Your MYSQL DB PORT\n    mysql_db_username: 'klovitclient' # Your MYSQL Username\n    mysql_db_password:  'password@123' # You MYSQL password\nlocations:\n  \"1\": # ID of the location on the pterodactyl panel\n    name: Default Location 1 # Display name for the location\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The start of third part, the ",(0,o.jsx)(n.code,{children:"database"})," is the configuration settings of the database which will be used to store dashboard side's information, ",(0,o.jsx)(n.strong,{children:"NOTE - User credentials and other authentication info will be stored on SupaBase's end."})," First of all, you'll have to decide the type of the database in the ",(0,o.jsx)(n.code,{children:"type"})," field, whether you want to use ",(0,o.jsx)(n.code,{children:"mysql"})," or ",(0,o.jsx)(n.code,{children:"sqlite"}),". If you have chosen SQLite as the type then, you have to set the name of the database in the ",(0,o.jsx)(n.code,{children:"sqlite_db_name"})," section. The rest of the fields are for MySQL database configuration and the fields have comments on what to fill in there."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yml",children:'eggs:\n  klovitegg: # KlovitClient\'s identifier of the egg\n    display: MultiEgg | KlovitEgg # Display name of the egg\n    limits: # formatted according to "resource_type"\n      minimum: # The minimum resources a user can use while deploying a server\n        ram: 1 \n        disk: 1\n        cpu: 1\n      maximum: # The maximum resources a user can use while deploying a server\n        ram: null\n        disk: null\n        cpu: null\n      feature: # The limits on the following features\n        databases: 1\n        backups: 1\n        allocations: 1\n    info: # All this information can be found on the Egg\'s information page.\n      egg: 16 # ID of the egg\n      docker_image: ghcr.io/beastgamer81/klovitegg:latest # Docker image of the egg\n      startup: ./install.sh" # Startup command of the egg \n      environment: # Environment variables of the egg\n        NODE_VERSION: latest\n        PMMP_VERSION: PM5\n        NODE_MAIN_FILE: index.js\n'})}),"\n",(0,o.jsx)(n.p,{children:"The start of fourth part, the egg configuration. You should use KlovitEgg or fill in the fields according to your chosen egg, the environment field is for variables."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yml",children:"coins: # Coins, the virtual currency of the host.\n  enabled: true # Must enable coins if you need the following things - Store, Link shorteners.\n  earn: # Earning of coins via various methods\n    enabled: true # Whether enable earning of coins or not. Coins must be enabled aswell or else the API Endpoints will throw errors\n    links: # Earning of coins via link shorteners\n      atglinks: # Earning of coins via ATGLinks\n        api: '785159b542f060cb98b55b27a09b2034df506bff' # Your ATGLinks API Key\n        amount: '5' # Amount of coins per link\n        dailylimit: null # Daily limit for users\n        minimumTime: '100' # Minimum time a user has to spend completing the link. (in seconds)\n  store: # The cost and per is not intended to used with 0. This is not intended to sell resources for coins. Make sure coins are enabled too, or else there can be errors.\n    enabled: false\n    ram:\n      cost: 1000 # Cost of the resource in coins\n      per: 1 # Will be in the format according to \"resource_type\"\n    disk:\n      cost: 1000\n      per: 1\n    cpu:\n      cost: 1000\n      per: 1\n    servers:\n      cost: 100\n      per: 1\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The start of fifth part, the ",(0,o.jsx)(n.code,{children:"coins"})," field decides whether the virtual currency is enabled or not. In the earn part, you can decide whether you want the users to earn coins by completing links, etc. You must configure the API key and the remmaining values.\nIn the store section, the ",(0,o.jsx)(n.code,{children:"enabled"})," field decides whether store is enabled or not, ",(0,o.jsx)(n.strong,{children:"NOTE:- COINS MUST BE ENABLED FOR STORE TO WORK."})," Now, we'll do the cost and quantity configuration. Again the cost is in coins and the quantity is decided as per the value of ",(0,o.jsx)(n.code,{children:"resource_type"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"setting-up-nginx",children:"Setting Up Nginx"}),"\n",(0,o.jsx)(n.p,{children:"The Nginx web server will allow us to use a custom domain name and apply SSL to it."}),"\n",(0,o.jsxs)(n.p,{children:["First, we need to make sure you have ",(0,o.jsx)(n.code,{children:"Nginx"})," and ",(0,o.jsx)(n.code,{children:"certbot"})," installed:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo apt install nginx\nsudo apt install certbot\nsudo apt install -y python3-certbot-nginx\n"})}),"\n",(0,o.jsx)(n.p,{children:"Now you can install your SSL certificate:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"systemctl start nginx\ncertbot certonly --nginx -d <KLOVITCLIENT_DOMAIN>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Make sure to replace ",(0,o.jsx)(n.code,{children:"<KLOVITCLIENT_DOMAIN>"})," with your domain name. If you have done this correctly you should see something similar to the following:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'IMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/your.klovitclient.domain/fullchain.pem\n   Your key file has been saved at:\n   /etc/letsencrypt/live/your.klovitclient.domain/privkey.pem\n   Your cert will expire on date. To obtain a new or tweaked\n   version of this certificate in the future, simply run certbot\n   again. To non-interactively renew *all* of your certificates, run\n   "certbot renew"\n - If you like Certbot, please consider supporting our work by:\n\n   Donating to ISRG / Let\'s Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n'})}),"\n",(0,o.jsxs)(n.p,{children:["If what you saw isn't similar to what you saw in your server, we recommend you ask for support on our ",(0,o.jsx)(n.a,{href:"https://discord.gg/wwpRNvkMHA",children:"Discord Server"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Next, if everything's going correctly, you need to go to the Nginx sites directory and create a configuration file:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd /etc/nginx/sites-available\nnano klovitclient.conf\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Now paste the following into the file. Make sure to replace ",(0,o.jsx)(n.code,{children:"<DOMAIN>"})," and ",(0,o.jsx)(n.code,{children:"<PORT>"})," with your KlovitClient domain and the port KlovitClient is running on."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-conf",children:'server {\n  listen 80;\n  listen [::]80;\n  server_name <DOMAIN>;\n  return 301 https://$server_name$request_uri;\n}\nserver {\n  listen 443 ssl http2;\n  listen [::]443 ssl http2;\n\n  server_name <DOMAIN>;\n  ssl_certificate /etc/letsencrypt/live/<DOMAIN>/fullchain.pem;\n  ssl_certificate_key /etc/letsencrypt/live/<DOMAIN>/privkey.pem;\n  ssl_session_cache shared:SSL:10m;\n  ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;\n  ssl_ciphers  HIGH:!aNULL:!MD5;\n  ssl_prefer_server_ciphers on;\n\n  location / {\n    proxy_pass http://localhost:<PORT>/;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection "Upgrade";\n    proxy_set_header Host $host;\n    proxy_buffering off;\n    proxy_set_header X-Real-IP $remote_addr;\n  }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"After we've setup the main config file, we'll need to symlink it to sites-enabled:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo ln -s /etc/nginx/sites-available/klovitclient.conf /etc/nginx/sites-enabled/klovitclient.conf\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Once you have edited, saved, and symlinked your configuration file, restart Nginx with ",(0,o.jsx)(n.code,{children:"systemctl restart nginx"})," and restart KlovitClient. You should see it running on that domain with SSL!"]}),"\n",(0,o.jsx)(n.h2,{id:"starting-klovitclient",children:"Starting KlovitClient"}),"\n",(0,o.jsx)(n.p,{children:"First we need to install pm2 and Astro:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"npm install astro -g\nnpm install pm2 -g\n"})}),"\n",(0,o.jsx)(n.p,{children:"Now you need to go to the dashboard directory and use:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"astro build\npm2 start ./dist/server/entry.mjs --name KlovitClient\n"})}),"\n",(0,o.jsx)(n.p,{children:"Once you have started KlovitClient, head to the Dashbard URL and login!"})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>r});var o=t(7294);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);